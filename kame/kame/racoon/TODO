$Id: TODO,v 1.3 2000/01/09 21:45:39 sakane Exp $

Sorry that `racoon' is not stable yet.  But she can exchange the key
in limited environment.  Try to run with racoon.conf in the case
which IPsec-SA required.  Please tell me, sakane@ydc.co.jp, bug report
except following items.  I do modify continuously until she will be stable.

TODO list

UGENT
o The documents for users convenience are to be written.

MUST
o IKE commit bit
o Informational Exchange processing properly.
o Sending and to receive and process Delete payload of Informational Exchange.
o authentication methods besides pre-shared-key. e.g. RSA, PGP.
o Certificate authentication and certificate request payloads
o ID payload should be checked in phase 1.
o In both phase, check SAs proposed and select a SA to use.
  In Currnet version, first SA in proposal is applied.
o Selectors (filters) to the IPaddress, IP Subnet, and port
o To be supported bytes lifetimes for ISAKMP-SA.
o Support scoped (link-local and site-local) IPv6 addresses.
  It needs pfkey modification for scope IDs, and advanced API (RFC2292)
  related mods in racoon itself.
o Support multiple proposals with same proposal ID (for AND conditions like
  "esp AND ah").  This needs updates to pfkey.

SHOULD
o fix flag for logging
o more acceptable check.
o To consider the use with certificate infrastructure.  PXIX ???
o New group mode should be considered.
o kmstat is to be useful.
o Dynamically retry to exchange and resend the packet per nodes.
o Remote maintenance with secure connection.
o To make the list of supported algorithm by sadb_supported payload
  in the SADB_REGISTER message which happens asynchronously.
o fix the structure of ph2handle.
  We can handle the below case.

  node A                            node B
    +--------------SA1----------------+
    +--------------SA2----------------+

  at node A:
  kernel
    acquire(A-B) ------> ph2handle(A=B) -----> ph1handle
                              |
                            policy
                             A=B
                             A=B

  But we can not handle the below case because there is no x?handle.

  node A                            node B                           node C
    +--------------SA1----------------+
    +------------------------------------------------SA2---------------+

  at node A:
  kernel
    acquire(A-C) ---+---> x?handle ---+---> ph2handle(A=B) -------> ph1handle
                    |        |        |
    acquire(A-B) ---+      policy     +---> ph2handle(A=C) -------> ph1handle
                            A=B
                            A=C

o mandatory configuration check.
o when either internal error and outernal error occur, to be consider to
  delete each handler.
o consistency of function name.
o deep copy configuration entry to hander.  It's easy to reload configuration.
o don't keep to hold keymat values, do it ?
o local address's field in isakmpsa handler must be kicked out to rmconf.

MAY
o Other exchange.  i.e. for the configration of KAME gif tunnel.
o Effective code.
o more fix strnames.c.

TO BE TESTED.
o IKE retransmit behavior
	see, draft-*-ipsec-rekeying*.txt
o Reboot recovery (peer reboot losing it's security associations)
	see, draft-*-ipsec-rekeying*.txt
o Scenarios
	- End-to-End transport long lived security associations
	  (over night, data transfer >1Gb) with frequent dynamic rekey
	- End-to-GW tunnel long lived security associations
	  (over night, data transfer >1Gb) with frequent dynamic rekey
	- Policy change events while under SA load
	- End-to-End SA through IPSec tunnels, initiation both ways
	- Client End-to-End through client-to-GW tunnel SA, initiate from
	  client for tunnel, then initiation both ways for end-to-end
	- Client-to-GW transport SA for secure management
o behavior to receive multiple auth method proposals and AND proposal

and to be written many many :-p

----------------------------------------------------------------------
to be negotiate SA peer's addresses per policy ?.

config:
policy {
	# Specification of a remote IP address of SA.
	association remote 172.168.2.2 ;

	# local address can(may or should?) be omited.
	# NOTE: If you specify "local" address, you must take care of "listen"
	# directive.  If the IP address you specify here doesn't exist in the
	# directive, it causes your negotiation failure happened.
	association local 172.168.1.1 ;

	# "negotiation" specifies address(es) which is used to negotiated SAs.
	# They are omited usually because of the same addresses that are
	# specifyed by "association" directive.  MobileIP may use them ?
	negotiation remote 172.168.2.2 ;

	# NOTE: See above "association" directive.
	negotiation local 172.168.1.1 ;
}

