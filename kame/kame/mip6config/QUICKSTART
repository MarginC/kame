		QUICK GUIDE TO INSTALLATION OF MOBILE IPV6
		==========================================

KERNEL
------
Use FreeBSD 4.2-RELEASE (a number of scenarios tested successfully).
FreeBSD 3.4 with 2000-06-19 snap is most tested but being phased out.

Add the following lines to your kernel config file:
	options	"MIP6"
	options	"MIP6_DEBUG"

It's now ok to also define with IPsec options, however not mandatory.

Compile and install kernel.

The two supporting binaries ``mip6config'' and ``mip6stat'' should have been
compiled by ordinary kame tree make.



GENERAL
-------
To run a Correspondent Node, you don't have to do anything else.

To run a Mobile Node or a Home Agent, start with a Correspondent Node
configuration and add a few things, see below. Note that a node can't act 
as Mobile Node and Home Agent at the same time.

Generally, on any node, create a mip6config config file, that holds the
settings.
	# cd /usr/local/v6/etc/
	# cp mip6.conf.sample mip6.conf

Keep line ``debug'' uncommented to see kernel messages. This is useful for
every node to see what happens.

Invoke Mobile IPv6 by
	# mip6config -f /usr/local/v6/etc/mip6.conf

(Note: Correspondent Node is invoked at kernel boot time.)

Correspondent Node needs no other line in the config file.


MOBILE NODE
-----------
The Mobile Node can be configured in four ways:
	1. Home Address and Home Agent are discovered automatically.
	   Add this line to the mip6.conf file:
		``mip6config -a''

	2. Home Address is specified but Home Agent is discovered
	   automatically.
	   Add this line to the mip6.conf file:
              	``homeaddr <Home addr>/<plen>@<interface>''

	3. Both Home Address and Home Agent is explicitly specified.
	   Add this line to the mip6.conf file:
              	``homeaddr <Home addr>/<plen>@<interface>%<Home Agent addr>''

	4. Only Home Prefix is specified.
	   Add this line to the mip6.conf file:
              	``homepref <Home prefix>/<plen>''

We recommend alternative 3 which will give you the most deterministic 
behaviour.

Alternative 4 will in a near future become the default (and only?) option.
However, at the moment it's very experimental.

Alternative 1 will be obsolete in the future.


HOME AGENT
----------
The Home Agent needs the following line in the mip6.conf file:
	``enable_ha''

The Home Agent also needs a modified /usr/local/v6/etc/rtadvd.conf file with
a few new and modified parameters.

	default:\
		:hatime#100:hapref#10:\
		:raflags#32:\
		:pinfoflags#224:
	ether:\
		:mtu#1500:tc=default:

	ef0:\
		:addrs#1:addr="3ffe:501:4819:1000:1234:5678:90ab:cdef":\
		:tc=ether:

Sometimes needed options:
	Shorter interval -> faster handover
	:maxinterval#2:mininterval#1:

	Home Agent is not Default Router of subnet:
	:rltime#0:

Home Agent needs to run ``rtadvd'' with option -m. This is only supported in
the snap version of rtadvd. In /etc/rc.network6, change line
	rtadvd ${rtadvd_interfaces}
to
	/usr/local/v6/sbin/rtadvd -m ${rtadvd_interfaces}

Any Default Router that you wish to support Advertisement Interval option
must also be started as
	/usr/local/v6/sbin/rtadvd -m <interfaces>

Note that the snap version of rtadvd still uses a default config file at
the /usr/local/v6/etc/ location.

OTHER
-----
When everything is running, use ``mip6stat'' to derive information from the
kernel on what is going on.

See README_MIP6.txt and the manual pages for ``mip6config'' and ``mip6stat''
for more information. There are more options.

$KAME: QUICKSTART,v 1.3 2001/03/29 05:34:28 itojun Exp $

