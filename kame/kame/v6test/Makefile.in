# Copyright (c) 1996 WIDE Project. All rights reserved.
#
# Redistribution and use in source and binary forms, with or without
# modifications, are permitted provided that the above copyright notice
# and this paragraph are duplicated in all such forms and that any
# documentation, advertising materials, and other materials related to
# such distribution and use acknowledge that the software was developed
# by the WIDE Project, Japan. The name of the Project may not be used to
# endorse or promote products derived from this software without
# specific prior written permission. THIS SOFTWARE IS PROVIDED ``AS IS''
# AND WITHOUT ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, WITHOUT
# LIMITATION, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
# A PARTICULAR PURPOSE.

.if exists(${.CURDIR}/../Makefile.opsys)
.include "${.CURDIR}/../Makefile.opsys"
.endif

PROG	= v6test
SRCS	= v6test.c cksum.c testcap.c getconfig.c
CFLAGS += @DEFS@
CFLAGS += @OPTFLAGS@
LDADD  += @LIBFLAGS@
.if (${OPSYS} != "NetBSD")
MAN1	= v6test.1
.else
MAN	= v6test.1
.endif
CONFS = ext.conf ndp.conf synloop.conf
CONFDIR = $(PREFIX)/share/v6test

#CFLAGS += -DDEFAUT_IF="ep0"

.include <bsd.prog.mk>

distclean:	clean
	rm -f config.log config.status config.cache Makefile

afterinstall:
	[ -d $(CONFDIR) ] || mkdir -p $(CONFDIR); \
	for i in $(CONFS); do \
		cp conf/$$i $(CONFDIR); \
	done
